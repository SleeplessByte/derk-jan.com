---
import KeyboardControl from "../../components/KeyboardControl.astro";
import HtmlLayout from "../../layouts/HtmlLayout.astro";
import "../../styles/transitions.css";

type Props = {
  title: string;
  "slides-class"?: string;
};

const { title, "slides-class": slidesClass } = Astro.props;
const currentPath = Astro.url.pathname;

const slideNumber = Number(title.split(" ")[1]?.split(":").shift() || "-1");
---

<HtmlLayout
  title={title
    ? `${title} Â· Practical solutions for accessible components: Talk, on Code in Bits and Pieces`
    : "Practical solutions for accessible components: Talk, on Code in Bits and Pieces"}
  class="slide-wrapper"
>
  <header>
    <a href="#content" class="skip-link">
      <span>Skip to main content</span>
    </a>
    {
      currentPath === "/talks/practical-solutions-for-accessible-components" ||
      currentPath === "/talks/practical-solutions-for-accessible-components/final" ? (
        <nav
          class={`${currentPath !== "/talks/practical-solutions-for-accessible-components" ? "opacity-20" : ""}`}
        >
          <a href="/talks" class="back-link z-20 bg-white/80 dark:bg-black/80">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class=""
              viewBox="0 0 20 20"
              fill="currentColor"
              aria-hidden="true"
            >
              <path
                fill-rule="evenodd"
                d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"
                clip-rule="evenodd"
              />
            </svg>
            <span>Back to all talks</span>
          </a>
        </nav>
      ) : null
    }
  </header>

  <h1 class="sr-only">Talk: Practical solutions for accessible components</h1>

  <p class="sr-only">
    This talk consists of multiple slides, each contained within its own section. Each
    section has a link at the end to the next section.
  </p>

  <main id="content" class={`${slidesClass ?? "fixed-slides"}`}>
    <slot />

    <footer class="absolute right-0 bottom-0 p-6 text-sm opacity-75">
      {slideNumber > 0 ? slideNumber : "??"} / 55
    </footer>
  </main>

  <KeyboardControl />
</HtmlLayout>
